{% extends "base.html" %}

{% block title %}Health Status Results - Beyond the Veil of Wellness{% endblock %}

{% block content %}
<!-- Results Hero Section -->
<section class="results-hero py-5 {{ status_class }}-bg">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="results-card bg-white rounded-4 shadow-lg p-5">
                    <div class="text-center mb-4">
                        <div class="result-icon mb-3">
                            {% if status_class == '0' %}
                                <i class="fas fa-exclamation-triangle fa-4x text-danger"></i>
                            {% else %}
                                <i class="fas fa-check-circle fa-4x text-success"></i>
                            {% endif %}
                        </div>
                        <h1 class="display-4 fw-bold text-primary mb-3">Health Status Report</h1>
                    </div>
                    
                    <!-- Status Card -->
                    <div class="status-card p-4 rounded-3 mb-4 {{ status_class }}-status">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h2 class="h3 fw-bold mb-2">
                                    {% if status_class == '0' %}
                                        <i class="fas fa-exclamation-circle me-2 text-danger"></i>
                                    {% else %}
                                        <i class="fas fa-heart me-2 text-success"></i>
                                    {% endif %}
                                    {{ health_status }}
                                </h2>
                                <p class="mb-0 fs-5">{{ recommendation }}</p>
                            </div>
                            <div class="col-md-4 text-md-end">
                                <div class="confidence-meter">
                                    <div class="h4 fw-bold mb-1">{{ confidence }}%</div>
                                    <small class="text-muted">Confidence Level</small>
                                    <div class="progress mt-2" style="height: 8px;">
                                        <div class="progress-bar bg-primary" role="progressbar" 
                                             data-confidence="{{ confidence }}"
                                             aria-valuenow="{{ confidence }}" 
                                             aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Input Summary -->
                    <div class="input-summary mb-4">
                        <h3 class="h4 fw-bold text-primary mb-3">
                            <i class="fas fa-clipboard-list me-2"></i>Input Summary
                        </h3>
                        <div class="row g-3">
                            {% for key, value in features.items() %}
                            <div class="col-md-6">
                                <div class="input-item p-3 bg-light rounded-3">
                                    <div class="fw-semibold text-primary mb-1">{{ key }}</div>
                                    <div class="text-dark">{{ value.replace('_', ' ').title() }}</div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="action-buttons text-center">
                        <a href="{{ url_for('predict_page') }}" class="btn btn-primary btn-lg me-3">
                            <i class="fas fa-redo me-2"></i>Check Another Animal
                        </a>
                        <a href="{{ url_for('home') }}" class="btn btn-outline-primary btn-lg">
                            <i class="fas fa-home me-2"></i>Back to Home
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Additional Information Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-6">
                <div class="info-card h-100 p-4 bg-white rounded-3 shadow-sm">
                    <h4 class="fw-bold text-primary mb-3">
                        <i class="fas fa-lightbulb me-2"></i>What This Means
                    </h4>
                    {% if status_class == '0' %}
                    <p class="text-muted mb-3">
                        The analysis indicates potential health concerns that require immediate attention. 
                        Early intervention is crucial for the best outcomes.
                    </p>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-check text-primary me-2"></i>Contact your veterinarian immediately</li>
                        <li class="mb-2"><i class="fas fa-check text-primary me-2"></i>Monitor the animal closely</li>
                        <li class="mb-2"><i class="fas fa-check text-primary me-2"></i>Keep the animal comfortable</li>
                        <li class="mb-2"><i class="fas fa-check text-primary me-2"></i>Follow professional medical advice</li>
                    </ul>
                    {% else %}
                    <p class="text-muted mb-3">
                        The analysis suggests the animal is in good health. Continue with regular care and monitoring 
                        to maintain optimal wellness.
                    </p>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Maintain regular feeding schedule</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Ensure adequate exercise</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Schedule routine check-ups</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Monitor for any changes</li>
                    </ul>
                    {% endif %}
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="info-card h-100 p-4 bg-white rounded-3 shadow-sm">
                    <h4 class="fw-bold text-primary mb-3">
                        <i class="fas fa-info-circle me-2"></i>Important Disclaimer
                    </h4>
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Medical Advice:</strong> This tool provides AI-based predictions for informational purposes only.
                    </div>
                    <p class="text-muted mb-3">
                        Always consult with a qualified veterinarian for proper diagnosis and treatment. 
                        This system is designed to assist, not replace, professional veterinary care.
                    </p>
                    <div class="contact-vet">
                        <h6 class="fw-bold text-primary">Need Professional Help?</h6>
                        <p class="text-muted mb-0">
                            <i class="fas fa-phone me-2"></i>Emergency Vet Hotline: +91 78453 23860
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
// Animate progress bar
document.addEventListener('DOMContentLoaded', function() {
    const progressBar = document.querySelector('.progress-bar');
    if (progressBar) {
        // Set the width from the data attribute to avoid template syntax issues
        const confidence = progressBar.getAttribute('data-confidence');
        if (confidence) {
            progressBar.style.width = confidence + '%';
        }
        
        setTimeout(() => {
            progressBar.style.transition = 'width 2s ease-in-out';
        }, 500);
    }
});

// Print results functionality
function printResults() {
    window.print();
}

// Share results functionality
function shareResults() {
    if (navigator.share) {
        navigator.share({
            title: 'Animal Health Status Report',
            text: 'Check out this animal health analysis result',
            url: window.location.href
        });
    } else {
        // Fallback for browsers that don't support Web Share API
        navigator.clipboard.writeText(window.location.href);
        alert('Link copied to clipboard!');
    }
}
</script>
{% endblock %}